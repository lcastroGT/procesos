<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Administrador de Procesos</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <style>
    #titulo{
        padding-left:40%;
    }
    #process{
        width:100%;
        height:260px;
    }
    #grafica-memoria{
        position:absolute;
        left:10%;
        top:120px;
        width:80%;
        height:30px;
        border: solid 1px;
    }
    #memoria-usada{
       position:relative;
       width:0px;
       height:28px;
       background-color:#f74c4c;
    }
    #historial{
        height:240px;
        overflow:auto;
    }
    .panel-default{
        margin:150px 20px 20px 20px;
        position:relative;
    }
    
    </style>
</head>
<body>
    <div class="container">
    <div class="page-header">
        <h1>Simulador de procesos<small> Ingenieria en Sistemas</small></h1>
    </div>
    <div class="row">
        <div class="col-sm-4 col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Propiedades</h3>
                </div>
            <div class="panel-body">
                <label for="memory">Tama√±o Total de Memoria</label>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Size memory" id="memory">
                    <span class="input-group-addon">Mb</span>
                </div>
                <hr>
                <input type="text" class="form-control" placeholder="Cantidad de procesos" id="procesos"><br>
                <button class="btn btn-info btn-block" onclick="cargar_proceso();" >Cargar</button>
            </div>
        </div>
        </div>
        <div class="col-sm-6 col-md-6">
            <div class="panel panel-primary" id="process">
                <div class="panel-heading">
                    <h3 class="panel-title">Memoria Principal</h3>
                </div>
                <div class="panel-body">
                    <div id="info_process"></div>
                    <div id="grafica-memoria">
                        <div id="memoria-usada"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-2 col-md-2">
           <b>Resumen de proceso</b>
           <div id="historial"></div>
        </div>
    </div>
    <div class="alert alert-info">El tamano del proceso se crea automaticamente, pudiendo tener como maximo el 50% del tamano de la memoria</div>
    
    <div class="row bg-primary" id="footer">
        <div class="hidden-xs col-sm-2 col-md-2">
            <img src="images/logo.png" width="110px" height="100px">
        </div>
        <div class="col-sm-8 col-md-8">
            <br><b>Universidad Mariano Galvez de Guatema</b>
            <p>Proyecto Sistemas Operativos Abiertos
            <br>9no Ciclo Ingenieria en Sistemas</p>
        </div>
    </div>
    </div>
    
    <!-- Manipular el objeto Canvas -->    
    <script type="text/javascript">
        
        var proceso = 0;
        var memoria_principal = 0;
        var ancho_inicial, ancho=0;
        var memoria_en_uso=0;
        
        function cargar_proceso(){
            proceso=1;
            memoria_principal = document.getElementById('memory').value
            var num_p = document.getElementById('procesos').value;
            
            var crear_procesos=setInterval(function(){
                if(proceso>=num_p) clearInterval(crear_procesos);
                crear_proceso(proceso);
                proceso++;
            },500);
        }
        function crear_proceso(pid_proceso){
            var size_p=Math.floor(Math.random() * ((memoria_principal/2)-1+1));
            ancho_inicial=((size_p/memoria_principal)*0.8)*100;
            //var ancho=((size_p/memoria_principal)*0.8)*100;
            document.getElementById("info_process").innerHTML="<h3>Proceso #"+pid_proceso+" -- "+size_p+" kb";
            document.getElementById("memoria-usada").style.width=ancho_inicial+ancho+"%";
            document.getElementById("historial").innerHTML+="PID "+pid_proceso+" -- "+size_p+"Kb<br>";
            ancho+=((size_p/memoria_principal)*0.8)*100;
        }
    </script>
</body>
</html>